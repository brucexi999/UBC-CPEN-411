import numpy as np
import matplotlib.pyplot as plt

# Define the clusters and bars
clusters = ['LRU', 'LIP', 'BIP', 'DIP', 'PTLRU']
bars = ['400', '401', '403', '462', '464', '471']
bar_width = 0.15
index = np.arange(len(bars))

def plot_clustered_chart(data, title):
    # Create a bar for each cluster in each position
    for i, cluster in enumerate(clusters):
        plt.bar(index + i*bar_width, data[i], bar_width, label=cluster)

    plt.xlabel('Benchmarks')
    plt.ylabel('Values')
    plt.title(title)
    plt.xticks(index + bar_width*(len(clusters)-1)/2, bars)  # Position the bar names in the center of the cluster
    plt.legend()
    plt.tight_layout()
    
    # Save the figure
    plt.savefig(title + '.png')
    plt.show()

# Your data lists
data_sets = [
    [
        [0.339681, 0.51132, 0.615946, 0.201646, 0.946511, 0.151025],
        [0.311224, 0.505894, 0.492507, 0.208528, 1.00417, 0.152128],
        [0.315178, 0.512692, 0.601574, 0.202711, 0.99008, 0.150813],
        [0.342739, 0.458382, 0.621765, 0.202352, 0.989906, 0.151193],
        [0.341923, 0.509502, 0.612429, 0.201868, 0.950422, 0.15244]
    ],
    [
        [0.605406, 0.791016, 0.7416, 0.15284, 0.478487, 0.358729],
        [0.157845, 0.743317, 0.418514, 0.114854, 0.432996, 0.130111],
        [0.197048, 0.754397, 0.599943, 0.0947001, 0.422962, 0.138422],
        [0.611251, 0.744682, 0.744874, 0.151855, 0.445232, 0.356629],
        [0.599309, 0.782701, 0.734767, 0.150371, 0.477414, 0.35723]
    ],
    [
        [0.487759, 0.798711, 0.825167, 0, 0.371576, 0.101616],
        [0.185694, 0.80518, 0.537185, 0.0319159, 0.452283, 0.090654],
        [0.225479, 0.803067, 0.794844, 0.000808308, 0.440464, 0.0868216],
        [0.49851, 0.756432, 0.834025, 0, 0.348064, 0.101079],
        [0.489634, 0.791469, 0.819889, 0, 0.384199, 0.10798]
    ],
    [
        [0.991886, 0.985076, 0.983189, 0.943956, 0.989861, 0.99125],
        [0.187913, 0.646821, 0.311025, 0.544151, 0.490251, 0.229469],
        [0.241453, 0.705741, 0.375999, 0.580695, 0.516879, 0.26531],
        [0.98816, 0.970306, 0.982506, 0.937872, 0.992567, 0.985424],
        [0.973848, 0.964479, 0.965618, 0.92871, 0.965131, 0.969519]
    ],
    [
        [2285.69, 941.3, 250.974, 419.019, 1347.13, 475.763],
        [1005.88, 927.078, 205.267, 384.714, 709.822, 345.357],
        [1057.06, 867.735, 175.794, 388.707, 782.315, 350.047],
        [2193.18, 931.835, 251.077, 416.422, 792.073, 473.695],
        [2157, 847.389, 250.872, 417.075, 1289.21, 467.572]
    ]
]

titles = ["ROI_Cumulative_IPC", "ROI_LLCTOTAL_HITRATE", "ROI_LLCLOAD_HITRATE", "ROI_LLCWRITEBACK_HITRATE", "ROI_LLCAVERAGE_MISS_LATENCY"]  # Add other graph titles here

for i, data in enumerate(data_sets):
    plot_clustered_chart(data, titles[i])
